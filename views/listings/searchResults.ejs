<% layout("/layouts/boilerplate") %>

<style>
  .card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
  }
</style>

<div class="row mt-3">
  <div class="col-8 offset-2">
    <h3>Search Results for "<%= query %>"</h3>
    <% if (country) { %>
    <p>Country: <%= country %></p>
    <% } %> <% if (listings.length > 0) { %> <% listings.forEach(listing => { %>
    <div class="card mb-3">
      <div class="row g-0">
        <div class="col-md-4">
          <img
            src="<%= listing.image.url %>"
            class="img-fluid rounded-start"
            alt="<%= listing.title %>"
          />
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title"><%= listing.title %></h5>
            <p class="card-text"><%= listing.description %></p>
            <p class="card-text">
              <small class="text-muted"
                >Location: <%= listing.location %>, <%= listing.country
                %></small
              >
            </p>
            <a href="/listings/<%= listing._id %>" class="btn btn-primary"
              >View Listing</a
            >
          </div>
        </div>
      </div>
    </div>
    <% }) %> <% } else { %>
    <div class="alert alert-warning" role="alert">
      No results found for your search query.
    </div>
    <% } %>
  </div>
</div>
